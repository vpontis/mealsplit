<h1>Who ate at <%= @restaurant_name %>?</h1>

<p>Please list the email of who paid for the receipt and the emails of everyone at the meal.</p>

<% @meal.participants.each do |participant| %>
  <% if !participant.id.nil? %>
    <div>
      <strong>Meal Participant</strong> 
      <%= participant.email %>
      <%= link_to "Destroy", meal_participant_path(@meal, participant), method: :delete, data: {confirm: "Sure dude?"} %>
    </div>
  <% end %>
<% end %>

<%= form_for([@meal, @new_participant]) do %>
  <div>
    <%= label_tag(:new_meal_participant, "Meal Participant", class: 'participant-label') %>
    <%= text_field_tag(:new_meal_participant) %>
  </div>
  <div>
    <%= submit_tag("Add Participant", class: 'btn btn-primary') %>
  </div>
<% end %>

<br />
<p>Done adding participants?</p>

<%= link_to "Next Page >>", edit_meal_participant_path(@meal, @meal.participants.first),
    class: "btn btn-primary" %>

<%= form_tag("/participants_list", method: "post") do %>
  <input id="meal-participants" name="meal_participants" type="hidden" value="1">
  <div>
    <%= label_tag(:meal_payer_name, "Who paid?", class: 'participant-label') %>
    <%= text_field_tag(:meal_payer_name) %>
  </div>
  <div id="meal-participant-1">
    <%= label_tag(:meal_participant_1, "Meal Participant", class: 'participant-label') %>
    <%= text_field_tag(:meal_participant_1) %>
  </div>
  <button id="add-participant-button" type="button" class="btn btn-default" onclick="add_meal_participant()">
    Add Participant <span class="glyphicon glyphicon-plus">
  </button>
  <div id="submit-button">
    <%= submit_tag("Next >>", class: 'btn btn-primary') %>
  </div>
<% end %>
